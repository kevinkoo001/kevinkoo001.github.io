/*!
 * Simple-Jekyll-Search
 * Copyright 2015-2020, Christian Fei
 * Licensed under the MIT License.
 */
!function(){"use strict";function t(){return 0}function e(){return f.length=0,f}function n(t){return Boolean(t)&&"[object Object]"===Object.prototype.toString.call(t)}function r(t){return f.push(t),f}function o(t,e){return function(){if(4===t.readyState&&200===t.status)try{e(null,JSON.parse(t.responseText))}catch(t){e(t,null)}}}var i={compile:function(t){return u.template.replace(u.pattern,function(e,n){var r=u.middleware(n,t[n],u.template);return void 0!==r?r:t[n]||e})},setOptions:function(t){u.pattern=t.pattern||u.pattern,u.template=t.template||u.template,"function"==typeof t.middleware&&(u.middleware=t.middleware)}};const u={pattern:/\{(.*?)\}/g,template:"",middleware:function(){}};var c=function(t,e){var n=e.length,r=t.length;if(n<r)return!1;if(r===n)return t===e;t:for(var o=0,i=0;o<r;o++){for(var u=t.charCodeAt(o);i<n;)if(e.charCodeAt(i++)===u)continue t;return!1}return!0},s=new function(){this.matches=function(t,e){return c(e.toLowerCase(),t.toLowerCase())}},a=new function(){this.matches=function(t,e){return!!t&&(t=t.trim().toLowerCase(),(e=e.trim().toLowerCase()).split(" ").filter(function(e){return 0<=t.indexOf(e)}).length===e.split(" ").length)}},l={put:function(t){return n(t)?r(t):function(t){return Boolean(t)&&"[object Array]"===Object.prototype.toString.call(t)}(t)?function(t){const o=[];e();for(let e=0,i=t.length;e<i;e++)n(t[e])&&o.push(r(t[e]));return o}(t):void 0},clear:e,search:function(t){return t?function(t,e,n,r){const o=[];for(let u=0;u<t.length&&o.length<r.limit;u++){var i=function(t,e,n,r){for(const o in t)if(!function(t,e){for(let r=0,o=e.length;r<o;r++){var n=e[r];if(new RegExp(n).test(t))return!0}return!1}(t[o],r.exclude)&&n.matches(t[o],e))return t}(t[u],e,n,r);i&&o.push(i)}return o}(f,t,d.searchStrategy,d).sort(d.sort):[]},setOptions:function(e){d=e||{},d.fuzzy=e.fuzzy||!1,d.limit=e.limit||10,d.searchStrategy=e.fuzzy?s:a,d.sort=e.sort||t,d.exclude=e.exclude||[]}};const f=[];let d={fuzzy:!1,limit:10};d.searchStrategy=d.fuzzy?s:a,d.sort=t,d.exclude=[];var p={load:function(t,e){const n=window.XMLHttpRequest?new window.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");n.open("GET",t,!0),n.onreadystatechange=o(n,e),n.send()}},h=function t(e){if(!(n=e)||!(void 0!==n.required&&n.required instanceof Array))throw new Error("-- OptionsValidator: required options missing");var n;if(!(this instanceof t))return new t(e);const r=e.required;this.getRequiredOptions=function(){return r},this.validate=function(t){const e=[];return r.forEach(function(n){void 0===t[n]&&e.push(n)}),e}},m={merge:function(t,e){const n={};for(const r in t)n[r]=t[r],void 0!==e[r]&&(n[r]=e[r]);return n},isJSON:function(t){try{return!!(t instanceof Object&&JSON.parse(JSON.stringify(t)))}catch(t){return!1}}};!function(t){function e(t){l.put(t),s.searchInput.addEventListener("input",function(t){-1===[13,16,20,37,38,39,40,91].indexOf(t.which)&&(n(),a(function(){o(t.target.value)},s.debounceTime))})}function n(){s.resultsContainer.innerHTML=""}function r(t){s.resultsContainer.innerHTML+=t}function o(t){var e;(e=t)&&0<e.length&&(n(),function(t,e){var n=t.length;if(0===n)return r(s.noResultsText);for(let o=0;o<n;o++)t[o].query=e,r(i.compile(t[o]))}(l.search(t),t))}function u(t){throw new Error("SimpleJekyllSearch --- "+t)}let c,s={searchInput:null,resultsContainer:null,json:[],success:Function.prototype,searchResultTemplate:'<br/>{title}<br/><em>{authors} </em><br /><a href="{url}">{display}</a>',templateMiddleware:Function.prototype,sortMiddleware:function(){return 0},noResultsText:"No results found",limit:10,fuzzy:!1,debounceTime:null,exclude:[]};const a=function(t,e){e?(clearTimeout(c),c=setTimeout(t,e)):t.call()};var f=["searchInput","resultsContainer","json"];const d=h({required:f});t.SimpleJekyllSearch=function(t){var n;return 0<d.validate(t).length&&u("You must specify the following required options: "+f),s=m.merge(s,t),i.setOptions({template:s.searchResultTemplate,middleware:s.templateMiddleware}),l.setOptions({fuzzy:s.fuzzy,limit:s.limit,sort:s.sortMiddleware,exclude:s.exclude}),m.isJSON(s.json)?e(s.json):(n=s.json,p.load(n,function(t,r){t&&u("failed to get JSON ("+n+")"),e(r)})),t={search:o},"function"==typeof s.success&&s.success.call(t),t}}(window)}();